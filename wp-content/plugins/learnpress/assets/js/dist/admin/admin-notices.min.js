(()=>{"use strict";const e=lpGlobalSettings.rest+"lp/v1/admin/tools/admin-notices";lpGlobalSettings.rest,lpGlobalSettings.rest,lpGlobalSettings.rest;let t,n=null,s=null;const l=window.location.search,o=new URLSearchParams(l).get("tab"),a=(t="")=>{if(!lpGlobalSettings.is_admin)return;let l=o?`?tab=${o}`:"";l+=t?(o?"&":"?")+`${t}`:"",fetch(e+l,{method:"POST",headers:{"X-WP-Nonce":lpGlobalSettings.nonce}}).then((e=>e.json())).then((e=>{const{status:t,message:l,data:o}=e;"success"===t?"Dismissed!"!==l&&(s=o.content,0===s.length&&n&&(n.style.display="none")):s=l})).catch((e=>{console.log(e)}))};a(),document.addEventListener("DOMContentLoaded",(()=>{n=document.querySelector(".lp-admin-notices"),t=document.querySelector(".btn-lp-notice-dismiss");const e=setInterval((()=>{null!==s&&(s.length>0&&(n.innerHTML=s,n.style.display="block",(()=>{try{const e=document.querySelector("#adminmenu");if(!e)return;const t=e.querySelector("#toplevel_page_learn_press");if(!t)return;const n=t.querySelector(".wp-menu-name");if(!n)return;const s=document.querySelector("input[name=lp-addons-new-version-totals]");if(!s)return;const l='<span class="tab-lp-admin-notice"></span>';n.insertAdjacentHTML("beforeend",l);const o=t.querySelector('a[href="admin.php?page=learn-press-addons"]');if(!o)return;const a=`<span style="margin-left: 5px" class="update-plugins">${s.value}</span>`;o.setAttribute("href","admin.php?page=learn-press-addons&tab=update"),o.insertAdjacentHTML("beforeend",a)}catch(e){console.log(e)}})()),clearInterval(e))}),1)})),document.addEventListener("click",(e=>{const t=e.target;if(t.classList.contains("btn-lp-notice-dismiss")&&(e.preventDefault(),confirm("Are you sure you want to dismiss this notice?"))){const e=t.closest(".lp-notice");a(`dismiss=${t.getAttribute("data-dismiss")}`),e.remove(),0===n.querySelectorAll(".lp-notice").length&&(n.style.display="none")}}))})();
(()=>{const e=jQuery;function t(e){return e.loading?e.text:"<div class='select2-result-course_title'>"+e.id+" - "+e.title.rendered+"</div>"}function n(e){return e.title.rendered||e.text}function d(d=null){const o=e(".lp-widget_select_course"),s=o.data("rest-url"),i=o.data("post_type")||"lp_course";o.select2({ajax:{method:"GET",url:s+"wp/v2/"+i,dataType:"json",delay:250,data:e=>({search:e.term}),processResults:(e,t)=>(t.page=t.page||1,{results:e}),cache:!0},escapeMarkup:e=>e,minimumInputLength:2,templateResult:t,templateSelection:n})}function o(){e(".widget-content .sortable").sortable({handle:".drag",start(e,t){},update(t,n){const d=[];e(this).children().map((function(){d.push(e(this).find("input").val())})),d.join(",");const o=e(this).closest(".widget-content").find("input.fields-sort");o.val(d),o.trigger("change")},stop(e,t){}})}document.addEventListener("DOMContentLoaded",(function(t){document.querySelector("#widgets-editor")?e(document).on("widget-added",(function(e,t){d(t)})):(e(document).on("learnpress/widgets/select",(function(){d(),o()})),d())})),document.addEventListener("DOMContentLoaded",(function(e){o()})),e(document).on("widget-added widget-updated",(function(e){o()}))})();
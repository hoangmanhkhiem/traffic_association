(()=>{"use strict";const e={};"undefined"!=typeof lpDataAdmin&&(e.admin={apiAdminNotice:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/admin-notices",apiAdminOrderStatic:lpDataAdmin.lp_rest_url+"lp/v1/orders/statistic",apiAddons:lpDataAdmin.lp_rest_url+"lp/v1/addon/all",apiAddonAction:lpDataAdmin.lp_rest_url+"lp/v1/addon/action",apiAddonsPurchase:lpDataAdmin.lp_rest_url+"lp/v1/addon/info-addons-purchase",apiSearchCourses:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/search-course",apiSearchUsers:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/search-user",apiAssignUserCourse:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/assign-user-course",apiUnAssignUserCourse:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/unassign-user-course",apiAJAX:lpDataAdmin.lp_rest_url+"lp/v1/load_content_via_ajax/"}),"undefined"!=typeof lpData&&(e.frontend={apiWidgets:lpData.lp_rest_url+"lp/v1/widgets/api",apiCourses:lpData.lp_rest_url+"lp/v1/courses/archive-course",apiAJAX:lpData.lp_rest_url+"lp/v1/load_content_via_ajax/"});const s=e,t=()=>{let e=window.location.href;return e.includes("?")&&(e=e.split("?")[0]),e},a=(e,s)=>{const t=new URL(e);return Object.keys(s).forEach((e=>{t.searchParams.set(e,s[e])})),t},n=(e,s)=>{new IntersectionObserver((function(e){for(const t of e)t.isIntersecting&&s(t)})).observe(e)};let r;"undefined"==typeof lpData&&console.log("lpData is undefined"),document.addEventListener("change",(function(e){const s=e.target;window.lpCoursesList.onChangeSortBy(e,s),window.lpCoursesList.onChangeTypeLayout(e,s)})),document.addEventListener("click",(function(e){const s=e.target;window.lpCoursesList.clickNumberPage(e,s),window.lpCoursesList.LoadMore(e,s)})),document.addEventListener("keyup",(function(e){const s=e.target;window.lpCoursesList.searchCourse(e,s)})),document.addEventListener("submit",(function(e){e.target})),window.lpCoursesList=(()=>{const e=".lp-list-courses-no-css",o=".lp-target",l=".courses-page-result",i=".lp-loading-no-css",d=t();return{clickNumberPage:(e,t)=>{const n=t.closest(".page-numbers:not(.disabled)");if(!n)return;const r=n.closest(`${o}`);if(!r)return;const l={...JSON.parse(r.dataset.send)};if(l.args.hasOwnProperty("paged")||(l.args.paged=1),0===l.args.courses_load_ajax)return;e.preventDefault(),n.classList.contains("prev")?l.args.paged--:n.classList.contains("next")?l.args.paged++:l.args.paged=n.textContent,r.dataset.send=JSON.stringify(l),lpData.urlParams.paged=l.args.paged,window.history.pushState({},"",a(d,lpData.urlParams));const i=r.closest("div:not(.lp-target)").querySelector(".lp-loading-change");i&&(i.style.display="block");const c=r.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:c});const p={success:e=>{const{status:s,message:t,data:a}=e;r.innerHTML=a.content||""},error:e=>{console.log(e)},completed:()=>{i&&(i.style.display="none")}};window.lpAJAXG.fetchAPI(s.frontend.apiAJAX,l,p)},LoadMore:(t,a)=>{const n=a.closest(".courses-btn-load-more-no-css:not(.disabled)");if(!n)return;const r=n.closest(`${o}`);if(!r)return;t.preventDefault(),n.classList.add("disabled");const d=n.querySelector(i),c={...JSON.parse(r.dataset.send)};c.args.hasOwnProperty("paged")||(c.args.paged=1),c.args.paged++,r.dataset.send=JSON.stringify(c),d&&d.classList.remove("hide");const p={success:s=>{const{status:t,message:a,data:o}=s,i=parseInt(o.paged),d=parseInt(o.total_pages),c=document.createElement("div");c.innerHTML=o.content||"";const p=r.querySelector(e),u=r.querySelector(l),g=c.querySelector(l);p.insertAdjacentHTML("beforeend",c.querySelector(e).innerHTML),u&&g&&(u.innerHTML=g.innerHTML),i>=d&&n.remove()},error:e=>{console.log(e)},completed:()=>{d&&d.classList.add("hide"),n.classList.remove("disabled")}};window.lpAJAXG.fetchAPI(s.frontend.apiAJAX,c,p)},LoadInfinite:()=>{const t=t=>{const a=t.target,n=a.querySelector(`${i}:not(.disabled)`);if(!n)return;n.classList.remove("hide"),n.classList.add("disabled");const r=a.closest(o);if(!r)return;const d={...JSON.parse(r.dataset.send)};d.args.hasOwnProperty("paged")||(d.args.paged=1),d.args.paged++,r.dataset.send=JSON.stringify(d);const c={success:s=>{const{status:t,message:n,data:o}=s,i=document.createElement("div");i.innerHTML=o.content||"";const d=r.querySelector(e),c=r.querySelector(l),p=i.querySelector(l);d.insertAdjacentHTML("beforeend",i.querySelector(e).innerHTML),c&&p&&(c.innerHTML=p.innerHTML),o.total_pages===o.paged&&a.remove()},error:e=>{console.log(e)},completed:()=>{n.classList.add("hide"),n.classList.remove("disabled")}};window.lpAJAXG.fetchAPI(s.frontend.apiAJAX,d,c)};var a;a=e=>{e.classList.contains("courses-load-infinite-no-css")&&n(e,t)},new MutationObserver((function(e){e.forEach((function(e){e.addedNodes&&e.addedNodes.forEach((function(e){1===e.nodeType&&a(e)}))}))})).observe(document,{childList:!0,subtree:!0});const r=document.querySelector(".courses-load-infinite-no-css");r&&n(r,t)},onChangeSortBy:(e,t)=>{if(!t.classList.contains("courses-order-by"))return;const n=t.closest(o);if(!n)return lpData.urlParams.paged=1,lpData.urlParams.order_by=t.value||"",void(window.location.href=a(d,lpData.urlParams));e.preventDefault();const r={...JSON.parse(n.dataset.send)};r.args.paged=1,r.args.order_by=t.value||"",n.dataset.send=JSON.stringify(r),lpData.urlParams.paged=r.args.paged,lpData.urlParams.order_by=r.args.order_by,window.history.pushState({},"",a(d,lpData.urlParams));const l=n.closest("div:not(.lp-target)").querySelector(".lp-loading-change");l&&(l.style.display="block");const i={success:e=>{const{status:s,message:t,data:a}=e;n.innerHTML=a.content||""},error:e=>{console.log(e)},completed:()=>{l&&(l.style.display="none")}};window.lpAJAXG.fetchAPI(s.frontend.apiAJAX,r,i)},onChangeTypeLayout:(s,t)=>{if("lp-switch-layout-btn"!==t.getAttribute("name"))return;const a=document.querySelector(e);if(!a)return;s.preventDefault();const n=t.value;n&&(a.dataset.layout=n,window.wpCookies.set("courses-layout",n,86400,"/"))},searchCourse:(e,n)=>{if("c_search"!==n.name)return;const l=n.closest(o);if(!l)return;e.preventDefault();const i={...JSON.parse(l.dataset.send)},d=n.value;i.args.c_search=d||"",i.args.paged=1,l.dataset.send=JSON.stringify(i),lpData.urlParams.paged=i.args.paged,lpData.urlParams.c_search=i.args.c_search,window.history.pushState({},"",a(t(),lpData.urlParams)),(!d||d&&d.length>2)&&(void 0!==r&&clearTimeout(r),r=setTimeout((function(){const e={success:e=>{const{status:s,message:t,data:a}=e;l.innerHTML=a.content||""},error:e=>{console.log(e)},completed:()=>{}};window.lpAJAXG.fetchAPI(s.frontend.apiAJAX,i,e)}),800))}}})(),window.lpCoursesList.LoadInfinite()})();
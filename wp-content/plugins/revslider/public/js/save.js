!function(){"use strict";window.SR7??={},window._tpt??={},SR7.F??={},SR7.D??={},void 0===SR7.F.saveAll&&(SR7.F.saveAll=function(e){var t,s,i,n,l={settings:{},slides:{}};for(i in SR7.M[e].migrate=!1,l.settings=SR7.F.removeMatching(SR7.D.moduleObj(e),SR7.M[e].settings),SR7.M[e].slides)if(_tpt.hop(SR7.M[e].slides,i))for(s in n=SR7.M[e].slides[i],l.slides[i]={slide:SR7.F.removeMatching(SR7.D.slideObj(e),n.slide),layers:{}},n.layers){if(!_tpt.hop(n.layers,s))continue;t=n.layers[s].type;let r=Object.keys(n.layers[s].addOns);l.slides[i].layers[s]=SR7.F.removeMatching(SR7.D.layerObject({id:e,obj:{},layertype:t,msource:SR7.M[e].settings.source,ISEMPTY:!0,useAddons:r}),n.layers[s]);let g=SR7.D.hasActionLike(e,i,s,"link");if(g&&"a"==g.ltype){let e=l.slides[i].layers[s];e.tag="a",e.target=Array.isArray(g.target)?g.target[0]:g.target??"_blank",e.href=g.link??"","nofollow"==g.flw&&(e.rel="nofollow"),"_blank"==g.target&&(e.rel=(e.rel??"")+(void 0!==e.rel&&e.rel.length>0?" ":"")+"noopener")}l.slides[i].layers[s].type=t}return delete l.settings.imgs,l},SR7.F.removeMatching=function(e,t){let s={};for(let i in t)if(!_tpt.hop(e,i)||e[i]instanceof HTMLElement)_tpt.hop(e,i)||(s[i]=t[i]);else if(Array.isArray(t[i])&&Array.isArray(e[i])){t[i].length===e[i].length&&t[i].every(((t,s)=>t===e[i][s]))||(s[i]=t[i])}else if("object"==typeof t[i]&&"object"==typeof e[i]){let n=SR7.F.removeMatching(e[i],t[i]);Object.keys(n).length>0&&(s[i]=n)}else t[i]!==e[i]&&(s[i]=t[i]);return s},SR7.F.collectImageSources=function(e){let t,s;e.settings.imgs=[],e.settings.bg?.image?.src&&e.settings.imgs.push(e.settings.bg.image.src);for(let i in e.slides)if(_tpt.hop(e.slides,i))for(let n in e.slides[i].layers){if(!_tpt.hop(e.slides[i].layers,n))continue;let l=e.slides[i].layers[n];if(void 0!==l.bg&&void 0!==l.bg.image&&-1==e.settings.imgs.indexOf(l.bg.image.src)){for(s in t=!1,e.settings.imgs)_tpt.hop(e.settings.imgs,s)&&(t=l.bg.image.src==e.settings.imgs[s].src);t||e.settings.imgs.push({lib_id:l.bg.image.lib_id,lib:l.bg.image.lib,src:l.bg.image.src})}if(void 0!==l.content){if(void 0!==l.content.image&&void 0!==l.content.image.src){for(s in t=!1,e.settings.imgs)_tpt.hop(e.settings.imgs,s)&&(t=l.content.image.src==e.settings.imgs[s].src);t||e.settings.imgs.push({lib_id:l.content.image.lib_id,lib:l.content.image.lib,src:l.content.image.src})}if(void 0!==l.content.src){for(s in t=!1,e.settings.imgs)_tpt.hop(e.settings.imgs,s)&&(t=l.content.src==e.settings.imgs[s].src);t||e.settings.imgs.push({lib_id:l.content.lib_id,lib:l.content.lib,src:l.content.src})}}}return e},SR7.F.saveSliderDatas=function(e,t,s){e=SR7.F.collectImageSources(e),_tpt.ajax({action:"save_slider_v7",data:{fromSR6:s,id:e.id,alias:e.settings.alias,title:e.settings.title,settings:JSON.stringify(e.settings),slides:JSON.stringify(e.slides)},callBack:e=>{t()}})},_tpt.R??={},_tpt.R.save=_tpt.extend?_tpt.extend(_tpt.R.save,{status:2,version:"1.0"}):{status:2,version:"1.0"})}();
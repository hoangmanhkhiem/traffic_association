{"version":3,"file":"course-review-v2.js","mappings":";;;;;AAAA,IAAIA,UAAU;AAEd,MAAMC,UAAU,GAAGA,CAAA,KAAM;EACxB,IAAKC,SAAS,KAAKF,UAAU,EAAG;IAC/BA,UAAU,CAACG,KAAK,CAAC,CAAC;EACnB;EACAH,UAAU,GAAG,IAAII,eAAe,CAAC,CAAC;EAClC,OAAOJ,UAAU,CAACK,MAAM;AACzB,CAAC;AAED,MAAMC,cAAc,GAAKC,WAAW,IAAM;EACzC,IAAK,CAAC,KAAKC,QAAQ,CAAEC,MAAM,CAACC,OAAQ,CAAC,EAAG;IACvCH,WAAW,GAAG;MACb,GAAGA,WAAW;MACdI,OAAO,EAAE;QACR,YAAY,EAAEF,MAAM,CAACG;MACtB;IACD,CAAC;EACF;EACA,OAAOL,WAAW;AACnB,CAAC;AAED,MAAMM,qBAAqB,GAAGA,CAAA,KAAM;EAChC,MAAMC,QAAQ,GAAGC,QAAQ,CAACC,gBAAgB,CAAC,qBAAqB,CAAC;EAEjE,IAAKF,QAAQ,KAAK,IAAI,EAAG;;EAEzB;EACA,MAAMG,IAAI,GAAGF,QAAQ,CAACG,aAAa,CAAC,wBAAwB,CAAC;EAE7D,IAAK,CAAED,IAAI,EAAG;IACV;EACJ;EAEH,KAAM,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,QAAQ,CAACM,MAAM,EAAED,CAAC,EAAE,EAAG;IAC3C,MAAME,GAAG,GAAGP,QAAQ,CAACK,CAAC,CAAC;IACvBE,GAAG,CAACC,gBAAgB,CAAC,OAAO,EAAGC,CAAC,IAAK;MACpCA,CAAC,CAACC,cAAc,CAAC,CAAC;MAClB;MACAP,IAAI,CAACQ,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC;IAChC,CAAC,CAAC;EACH;AACD,CAAC;AAED,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAC3B,MAAMC,UAAU,GAAGb,QAAQ,CAACG,aAAa,CAAC,cAAc,CAAC;EACzD,IAAK,CAAEU,UAAU,EAAG;IACnB;EACD;EAEA,MAAMC,UAAU,GAAGD,UAAU,CAACV,aAAa,CAAC,iBAAiB,CAAC;EAE9D,IAAI,CAAEW,UAAU,EAAG;IAClB;EACD;EACA,MAAMC,KAAK,GAAGD,UAAU,CAACb,gBAAgB,CAAC,iBAAiB,CAAC;EAC5D,IAAIe,OAAO,GAAG,KAAK;EAEnB,MAAMC,cAAc,GAAGA,CAACF,KAAK,EAAEG,KAAK,KAAK;IACxC,CAAC,GAAGH,KAAK,CAAC,CAACI,GAAG,CAAGC,SAAS,IAAK;MAC9B,MAAMC,UAAU,GAAGD,SAAS,CAACE,YAAY,CAAC,OAAO,CAAC;MAElD,IAAKD,UAAU,IAAIH,KAAK,EAAG;QAC1BE,SAAS,CAACjB,aAAa,CAAC,MAAM,CAAC,CAACO,SAAS,CAACa,GAAG,CAAC,OAAO,CAAC;MACvD,CAAC,MAAM;QACNH,SAAS,CAACjB,aAAa,CAAC,MAAM,CAAC,CAACO,SAAS,CAACC,MAAM,CAAC,OAAO,CAAC;MAC1D;IACD,CAAC,CAAC;EACH,CAAC;EAEDI,KAAK,IAAIA,KAAK,CAACS,OAAO,CAAE,CAACC,IAAI,EAACC,KAAK,KAAK;IACvC,MAAMR,KAAK,GAAGO,IAAI,CAACH,YAAY,CAAC,OAAO,CAAC;IACxCG,IAAI,CAAClB,gBAAgB,CAAC,WAAW,EAAE,MAAM;MACxC,IAAI,CAAES,OAAO,EAAG;QACfC,cAAc,CAAEF,KAAK,EAAEG,KAAM,CAAC;MAC/B;IACD,CAAC,CAAC;IAEFO,IAAI,CAAClB,gBAAgB,CAAC,OAAO,EAAE,MAAM;MACpCS,OAAO,GAAG,IAAI;MACdC,cAAc,CAAEF,KAAK,EAAEG,KAAM,CAAC;MAC9BlB,QAAQ,CAACG,aAAa,CAAE,yDAAyD,CAAC,CAACwB,KAAK,GAAGT,KAAK;IACjG,CAAC,CAAC;EACH,CAAC,CAAC;EAEFJ,UAAU,CAACP,gBAAgB,CAAC,UAAU,EAAE,MAAM;IAC7CQ,KAAK,CAACS,OAAO,CAAGJ,SAAS,IAAK;MAC7B,CAACJ,OAAO,IAAII,SAAS,CAACjB,aAAa,CAAC,MAAM,CAAC,CAACO,SAAS,CAACC,MAAM,CAAC,OAAO,CAAC;IACtE,CAAC,CAAC;EACH,CAAC,CAAC;EAEFb,qBAAqB,CAAC,CAAC;AACxB,CAAC;AAED,MAAM8B,oBAAoB,GAAGA,CAAA,KAAM;EAElC;EACA,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACzB,MAAMC,mBAAmB,GAAG9B,QAAQ,CAACG,aAAa,CAAE,2BAA4B,CAAC;IAEjF,IAAK,CAAE2B,mBAAmB,EAAG;MAC5B;IACD;IAEA,MAAMC,SAAS,GAAGD,mBAAmB,CAACE,OAAO,CAACC,EAAE;IAEhDC,WAAW,CAAEJ,mBAAmB,EAAEC,SAAU,CAAC;EAC9C,CAAC;EAED,MAAMG,WAAW,GAAGA,CAAEC,GAAG,EAAEJ,SAAS,GAAG,CAAC,KAAM;IAC7C,MAAMK,QAAQ,GAAGD,GAAG,CAAChC,aAAa,CAAE,wBAAyB,CAAC;IAE9D,IAAIb,MAAM,GAAGJ,UAAU,CAAC,CAAC;IAEzB,MAAMmD,GAAG,GAAI,GAAE3C,MAAM,CAAC4C,WAAY,sCAAqCP,SAAU,EAAC;IAClF,IAAIvC,WAAW,GAAG;MACjB+C,MAAM,EAAE;IACT,CAAC;IACD/C,WAAW,GAAGD,cAAc,CAAEC,WAAY,CAAC;;IAE3C;;IAEAgD,KAAK,CAAEH,GAAG,EAAE;MAAE,GAAG7C,WAAW;MAAEF;IAAO,CAAE,CAAC,CACtCmD,IAAI,CAAIC,QAAQ,IAAMA,QAAQ,CAACC,IAAI,CAAC,CAAE,CAAC,CACvCF,IAAI,CAAIC,QAAQ,IAAM;MACtB;MACA,IAAKA,QAAQ,CAACE,MAAM,KAAK,OAAO,EAAG;QAClC,MAAM,IAAIC,KAAK,CAAEH,QAAQ,CAACI,OAAO,IAAI,OAAQ,CAAC;MAC/C;MACA,IAAIC,IAAI,GAAGL,QAAQ,CAACK,IAAI;MACxBA,IAAI,IAAIZ,GAAG,CAACa,kBAAkB,CAAE,WAAW,EAAED,IAAK,CAAC;IACpD,CAAE,CAAC,CAACE,KAAK,CAAIC,KAAK,IAAM;MACvBC,OAAO,CAACC,GAAG,CAAEF,KAAM,CAAC;MACpBf,GAAG,CAACa,kBAAkB,CAAE,WAAW,EAAG,4DAA4DE,KAAK,IAAI,4CAA8C,QAAQ,CAAC;IACnK,CAAE,CAAC,CACFG,OAAO,CAAE,MAAM,CAAC,CAAE,CAAC;IAErBjB,QAAQ,IAAIA,QAAQ,CAACzB,MAAM,CAAC,CAAC;;IAEvB;;IAEAb,qBAAqB,CAAC,CAAC;;IAE7B;IACA,MAAMwD,kBAAkB,GAAGtD,QAAQ,CAACC,gBAAgB,CAAE,qBAAsB,CAAC;IAC7E,IAAKqD,kBAAkB,EAAG;MACzBA,kBAAkB,CAAC9B,OAAO,CAAI+B,EAAE,IAAM;QACrCA,EAAE,CAACC,KAAK,CAACC,OAAO,GAAG,MAAM;MAC1B,CAAE,CAAC;IACJ;IAEA,MAAMC,aAAa,GAAG1D,QAAQ,CAACC,gBAAgB,CAAE,qBAAsB,CAAC;IACxE,IAAKyD,aAAa,EAAG;MACpBJ,kBAAkB,CAAC9B,OAAO,CAAI+B,EAAE,IAAM;QACrCA,EAAE,CAACC,KAAK,CAACG,QAAQ,GAAG,UAAU;MAC/B,CAAE,CAAC;IACJ;IACA;EACD,CAAC;EAGD9B,WAAW,CAAC,CAAC;EAEb,MAAM+B,YAAY,GAAKC,aAAa,IAAM;IACzC,MAAM3D,IAAI,GAAG2D,aAAa,CAACC,OAAO,CAAE,MAAO,CAAC;IAC5C,MAAMC,SAAS,GAAG7D,IAAI,CAACC,aAAa,CAAC,kBAAkB,CAAC;IACxD,IAAK,CAAE4D,SAAS,EAAG;MAClB;IACD;IAEA,MAAMC,WAAW,GAAGD,SAAS,CAAC5D,aAAa,CAAC,4BAA4B,CAAC,CAACwB,KAAK,IAAI,EAAE;IACrF,MAAMsC,aAAa,GAAGF,SAAS,CAAC5D,aAAa,CAAC,iCAAiC,CAAC,CAACwB,KAAK,IAAI,EAAE;IAC5F,MAAMuC,MAAM,GAAGC,MAAM,CAAEJ,SAAS,CAAC5D,aAAa,CAAE,sBAAuB,CAAC,CAACwB,KAAK,IAAI,CAAE,CAAC;IACrF,MAAMyC,QAAQ,GAAGP,aAAa,CAAC7B,OAAO,CAACC,EAAE;IACzC,MAAMoC,UAAU,GAAGN,SAAS,CAAC5D,aAAa,CAAE,2BAA4B,CAAC,CAACwB,KAAK;IAC/E,MAAM2C,YAAY,GAAGP,SAAS,CAAC5D,aAAa,CAAE,6BAA8B,CAAC,CAACwB,KAAK;IACnF,MAAM4C,WAAW,GAAGR,SAAS,CAAC5D,aAAa,CAAE,4BAA6B,CAAC,CAACwB,KAAK;IAEjF,IAAK,CAAC,KAAKqC,WAAW,CAAC3D,MAAM,EAAG;MAC/BmE,KAAK,CAACH,UAAU,CAAC;MACjB;IACD;IAEA,IAAK,CAAC,KAAKJ,aAAa,CAAC5D,MAAM,EAAG;MACjCmE,KAAK,CAACF,YAAY,CAAC;MACnB;IACD;IAEA,IAAK,CAAC,KAAKJ,MAAM,EAAG;MACnBM,KAAK,CAACD,WAAW,CAAC;MAClB;IACD;IAEAV,aAAa,CAACnD,SAAS,CAACa,GAAG,CAAE,SAAU,CAAC;IAExC,IAAIjC,MAAM,GAAGJ,UAAU,CAAC,CAAC;IACzB,MAAMmD,GAAG,GAAI,GAAE3C,MAAM,CAAC4C,WAAY,qBAAoB;IACtD,IAAImC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC7BD,QAAQ,CAACE,MAAM,CAAE,IAAI,EAAEP,QAAS,CAAC;IACjCK,QAAQ,CAACE,MAAM,CAAE,MAAM,EAAET,MAAO,CAAC;IACjCO,QAAQ,CAACE,MAAM,CAAE,OAAO,EAAEX,WAAY,CAAC;IACvCS,QAAQ,CAACE,MAAM,CAAE,SAAS,EAAEV,aAAc,CAAC;IAC3C,IAAIzE,WAAW,GAAG;MACjB+C,MAAM,EAAE,MAAM;MACdqC,IAAI,EAACH;IACN,CAAC;IACDjF,WAAW,GAAGD,cAAc,CAAEC,WAAY,CAAC;IAE3CgD,KAAK,CAAEH,GAAG,EAAE;MAAE,GAAG7C,WAAW;MAAEF;IAAO,CAAE,CAAC,CACtCmD,IAAI,CAAIC,QAAQ,IAAMA,QAAQ,CAACC,IAAI,CAAC,CAAE,CAAC,CACvCF,IAAI,CAAIC,QAAQ,IAAM;MACtB;MACA,IAAKA,QAAQ,CAACE,MAAM,KAAK,OAAO,EAAG;QAClC,MAAM,IAAIC,KAAK,CAAEH,QAAQ,CAACI,OAAO,IAAI,OAAQ,CAAC;MAC/C;MACAe,aAAa,CAACnD,SAAS,CAACC,MAAM,CAAE,SAAU,CAAC;MAC3CkE,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;IACzB,CAAE,CAAC,CAAC9B,KAAK,CAAIC,KAAK,IAAM;MACvBC,OAAO,CAACC,GAAG,CAAEF,KAAM,CAAC;MACpBa,SAAS,CAACiB,SAAS,IAAK,2DAA2D9B,KAAO,OAAM;IACjG,CAAE,CAAC,CACFG,OAAO,CAAE,MAAM,CAAC,CAAE,CAAC;EACtB,CAAC;EAED,MAAM4B,cAAc,GAAGA,CAAE9C,GAAG,EAAEF,EAAE,EAAEiD,IAAI,EAAEC,aAAa,GAAG,KAAK,KAAM;IAClE,IAAI7F,MAAM,GAAGJ,UAAU,CAAC,CAAC;IACzB,MAAMmD,GAAG,GAAI,GAAE3C,MAAM,CAAC4C,WAAY,uBAAsBL,EAAG,UAASiD,IAAK,kBAAiB;IAC1F,IAAI1F,WAAW,GAAG;MACjB+C,MAAM,EAAE;IACT,CAAC;IACD/C,WAAW,GAAGD,cAAc,CAAEC,WAAY,CAAC;IAE3CgD,KAAK,CAAEH,GAAG,EAAE;MAAE,GAAG7C,WAAW;MAAEF;IAAO,CAAE,CAAC,CACtCmD,IAAI,CAAIC,QAAQ,IAAMA,QAAQ,CAACC,IAAI,CAAC,CAAE,CAAC,CACvCF,IAAI,CAAIC,QAAQ,IAAM;MACtB;MACA,IAAKA,QAAQ,CAACE,MAAM,KAAK,OAAO,EAAG;QAClC,MAAM,IAAIC,KAAK,CAAEH,QAAQ,CAACI,OAAO,IAAI,OAAQ,CAAC;MAC/C;MACA,IAAIC,IAAI,GAAGL,QAAQ,CAACK,IAAI;MACxB;MACAZ,GAAG,CAAC6C,SAAS,IAAIjC,IAAI,CAACqC,QAAQ;MAC9B,IAAKD,aAAa,EAAG;QACpBA,aAAa,CAACzE,SAAS,CAACC,MAAM,CAAE,SAAU,CAAC;QAE3C,MAAM0E,KAAK,GAAGF,aAAa,CAACnD,OAAO,CAACqD,KAAK;QACzC,MAAMC,UAAU,GAAGH,aAAa,CAACnD,OAAO,CAACuD,MAAM;QAE/C,IAAKD,UAAU,KAAKD,KAAK,EAAG;UAC3BF,aAAa,CAACxE,MAAM,CAAC,CAAC;QACvB;QAEAwE,aAAa,CAACnD,OAAO,CAACqD,KAAK,GAAG5F,QAAQ,CAAE4F,KAAM,CAAC,GAAG,CAAC;MACpD;;MAEA;MACA,MAAM/B,kBAAkB,GAAGtD,QAAQ,CAACC,gBAAgB,CAAE,qBAAsB,CAAC;MAC7E,IAAKqD,kBAAkB,EAAG;QACzBA,kBAAkB,CAAC9B,OAAO,CAAI+B,EAAE,IAAM;UACrCA,EAAE,CAACC,KAAK,CAACC,OAAO,GAAG,MAAM;QAC1B,CAAE,CAAC;MACJ;IACD,CAAE,CAAC,CAACR,KAAK,CAAIC,KAAK,IAAM;MACvBC,OAAO,CAACC,GAAG,CAAEF,KAAM,CAAC;MACpBf,GAAG,CAAC6C,SAAS,IAAK,2DAA2D9B,KAAK,IAAIA,KAAO,OAAM;IACpG,CAAE,CAAC,CACFG,OAAO,CAAE,MAAM,CAAC,CAAE,CAAC;EACtB,CAAC;EAEDrD,QAAQ,CAACO,gBAAgB,CAAE,OAAO,EAAE,UAAUC,CAAC,EAAG;IACjD,MAAM2E,aAAa,GAAGnF,QAAQ,CAACG,aAAa,CAAE,0BAA2B,CAAC;IAC1E,IAAKgF,aAAa,IAAKA,aAAa,CAACK,QAAQ,CAAEhF,CAAC,CAACiF,MAAM,CAAC,EAAI;MAC3DN,aAAa,CAACzE,SAAS,CAACa,GAAG,CAAE,SAAU,CAAC;MACxC,MAAM8D,KAAK,GAAGF,aAAa,IAAIA,aAAa,CAACnD,OAAO,CAACqD,KAAK;MAC1D,MAAMjB,QAAQ,GAAGe,aAAa,IAAIA,aAAa,CAACnD,OAAO,CAACC,EAAE;MAC1D,MAAMyD,OAAO,GAAG1F,QAAQ,CAACG,aAAa,CAAE,sBAAuB,CAAC;MAChE8E,cAAc,CAAES,OAAO,EAAEtB,QAAQ,EAAEiB,KAAK,EAAEF,aAAc,CAAC;IAC1D;IAEA,MAAMtB,aAAa,GAAG7D,QAAQ,CAACG,aAAa,CAAC,kCAAkC,CAAC;IAChF,IAAK0D,aAAa,IAAKA,aAAa,CAAC2B,QAAQ,CAAEhF,CAAC,CAACiF,MAAM,CAAC,EAAI;MAC3D7B,YAAY,CAAEC,aAAc,CAAC;IAC9B;IACA,IAAKrD,CAAC,CAACiF,MAAM,CAAC/E,SAAS,CAAC8E,QAAQ,CAAE,gBAAiB,CAAC,EAAG;MAChD,MAAMtF,IAAI,GAAGF,QAAQ,CAACG,aAAa,CAAC,wBAAwB,CAAC;MAE7D,IAAI,CAAED,IAAI,EAAG;QACT;MACJ;;MAEN;MACAU,aAAa,CAAC,CAAC;;MAET;MACAV,IAAI,CAACQ,SAAS,CAACa,GAAG,CAAC,QAAQ,CAAC;IACnC;EAED,CAAE,CAAC;AACJ,CAAC;AAEDvB,QAAQ,CAACO,gBAAgB,CAAC,kBAAkB,EAAE,YAAU;EACpDqB,oBAAoB,CAAC,CAAC;AAC1B,CAAC,CAAC,C","sources":["webpack://learnpress-course-review/./assets/src/js/course-review-v2.js"],"sourcesContent":["let controller;\n\nconst loadSignal = () => {\n\tif ( undefined !== controller ) {\n\t\tcontroller.abort();\n\t}\n\tcontroller = new AbortController();\n\treturn controller.signal;\n};\n\nconst loadNonceParam = ( paramsFetch ) => {\n\tif ( 0 !== parseInt( lpData.user_id ) ) {\n\t\tparamsFetch = {\n\t\t\t...paramsFetch,\n\t\t\theaders: {\n\t\t\t\t'X-WP-Nonce': lpData.nonce,\n\t\t\t},\n\t\t};\n\t}\n\treturn paramsFetch;\n}\n\nconst closePopupWriteReview = () => {\n    const btnClose = document.querySelectorAll('#review-form .close');\n\n    if ( btnClose === null ) return;\n\n    //const modal = document.getElementById('course-review-overlay');\n    const form = document.querySelector('.course-review-wrapper');\n\n    if ( ! form ) {\n        return;\n    }\n\n\tfor ( let i = 0; i < btnClose.length; i++ ) {\n\t\tconst btn = btnClose[i];\n\t\tbtn.addEventListener('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\t//modal.classList.remove('active');\n\t\t\tform.classList.remove('active');\n\t\t});\n\t}\n};\n\nconst addReviewStar = () => {\n\tconst reviewForm = document.querySelector('.review-form');\n\tif ( ! reviewForm ) {\n\t\treturn;\n\t}\n\n\tconst reviewStar = reviewForm.querySelector('ul.review-stars');\n\n\tif( ! reviewStar ) {\n\t\treturn;\n\t}\n\tconst stars = reviewStar.querySelectorAll('li.review-title');\n\tlet clicked = false;\n\n\tconst addClassReview = (stars, title) => {\n\t\t[...stars].map( (starHover) => {\n\t\t\tconst titleHover = starHover.getAttribute('title');\n\n\t\t\tif ( titleHover <= title ) {\n\t\t\t\tstarHover.querySelector('span').classList.add('hover');\n\t\t\t} else {\n\t\t\t\tstarHover.querySelector('span').classList.remove('hover');\n\t\t\t}\n\t\t});\n\t}\n\n\tstars && stars.forEach( (star,index) => {\n\t\tconst title = star.getAttribute('title');\n\t\tstar.addEventListener('mouseover', () => {\n\t\t\tif( ! clicked ) {\n\t\t\t\taddClassReview( stars, title )\n\t\t\t}\n\t\t});\n\n\t\tstar.addEventListener('click', () => {\n\t\t\tclicked = true;\n\t\t\taddClassReview( stars, title );\n\t\t\tdocument.querySelector( 'ul.review-fields li.review-actions input[name=\"rating\"]').value = title;\n\t\t});\n\t});\n\n\treviewStar.addEventListener('mouseout', () => {\n\t\tstars.forEach( (starHover) => {\n\t\t\t!clicked && starHover.querySelector('span').classList.remove('hover');\n\t\t});\n\t})\n\n\tclosePopupWriteReview()\n}\n\nconst courseReviewSkeleton = () => {\n\n\t//loader template tab\n\tconst skeletonTab = () => {\n\t\tconst elementCourseReview = document.querySelector( '.learnpress-course-review' );\n\n\t\tif ( ! elementCourseReview ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst course_id = elementCourseReview.dataset.id;\n\n\t\tgetResponse( elementCourseReview, course_id );\n\t};\n\n\tconst getResponse = ( ele, course_id = 0 ) => {\n\t\tconst skeleton = ele.querySelector( '.lp-skeleton-animation' );\n\n\t\tlet signal = loadSignal();\n\n\t\tconst url = `${lpData.lp_rest_url}lp/v1/review/rating-comment/course/${course_id}`;\n\t\tlet paramsFetch = {\n\t\t\tmethod: 'GET',\n\t\t};\n\t\tparamsFetch = loadNonceParam( paramsFetch );\n\n\t\t// console.log( 'load' );\n\n\t\tfetch( url, { ...paramsFetch, signal } )\n\t\t\t.then( ( response ) => response.json() )\n\t\t\t.then( ( response ) => {\n\t\t\t\t//console.log( response );\n\t\t\t\tif ( response.status === 'error' ) {\n\t\t\t\t\tthrow new Error( response.message || 'Error' );\n\t\t\t\t}\n\t\t\t\tlet data = response.data;\n\t\t\t\tdata && ele.insertAdjacentHTML( 'beforeend', data );\n\t\t\t} ).catch( ( error ) => {\n\t\t\t\tconsole.log( error );\n\t\t\t\tele.insertAdjacentHTML( 'beforeend', `<div class=\"lp-ajax-message error\" style=\"display:block\">${ error || 'Error: Query lp/v1/lazy-load/course-review' }</div>` );\n\t\t\t} )\n\t\t\t.finally( () => {} );\n\n\t\tskeleton && skeleton.remove();\n\n        //popup write review\n\n        closePopupWriteReview();\n\n\t\t// Temporary fix for theme.\n\t\tconst elReviewStarsRated = document.querySelectorAll( '.review-stars-rated' );\n\t\tif ( elReviewStarsRated ) {\n\t\t\telReviewStarsRated.forEach( ( el ) => {\n\t\t\t\tel.style.display = 'flex';\n\t\t\t} );\n\t\t}\n\n\t\tconst elReviewStars = document.querySelectorAll( '.review-stars-rated' );\n\t\tif ( elReviewStars ) {\n\t\t\telReviewStarsRated.forEach( ( el ) => {\n\t\t\t\tel.style.position = 'relative';\n\t\t\t} );\n\t\t}\n\t\t// End\n\t};\n\n\n\tskeletonTab();\n\n\tconst submitReview = ( btnReviewForm ) => {\n\t\tconst form = btnReviewForm.closest( 'form' );\n\t\tconst parenNode = form.querySelector('ul.review-fields');\n\t\tif ( ! parenNode ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst reviewTitle = parenNode.querySelector('input[name=\"review_title\"]').value || '';\n\t\tconst reviewContent = parenNode.querySelector('textarea[name=\"review_content\"]').value || '';\n\t\tconst rating = Number( parenNode.querySelector( 'input[name=\"rating\"]' ).value || 0 );\n\t\tconst courseID = btnReviewForm.dataset.id;\n\t\tconst emptyTitle = parenNode.querySelector( 'input[name=\"empty_title\"]' ).value;\n\t\tconst emptyContent = parenNode.querySelector( 'input[name=\"empty_content\"]' ).value;\n\t\tconst emptyRating = parenNode.querySelector( 'input[name=\"empty_rating\"]' ).value;\n\n\t\tif ( 0 === reviewTitle.length ) {\n\t\t\talert(emptyTitle);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( 0 === reviewContent.length ) {\n\t\t\talert(emptyContent);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( 0 === rating ) {\n\t\t\talert(emptyRating);\n\t\t\treturn;\n\t\t}\n\n\t\tbtnReviewForm.classList.add( 'loading' );\n\n\t\tlet signal = loadSignal();\n\t\tconst url = `${lpData.lp_rest_url}lp/v1/review/submit`;\n\t\tlet formData = new FormData();\n\t\tformData.append( 'id', courseID );\n\t\tformData.append( 'rate', rating );\n\t\tformData.append( 'title', reviewTitle );\n\t\tformData.append( 'content', reviewContent );\n\t\tlet paramsFetch = {\n\t\t\tmethod: 'POST',\n\t\t\tbody:formData\n\t\t};\n\t\tparamsFetch = loadNonceParam( paramsFetch );\n\n\t\tfetch( url, { ...paramsFetch, signal } )\n\t\t\t.then( ( response ) => response.json() )\n\t\t\t.then( ( response ) => {\n\t\t\t\t//console.log( response );\n\t\t\t\tif ( response.status === 'error' ) {\n\t\t\t\t\tthrow new Error( response.message || 'Error' );\n\t\t\t\t}\n\t\t\t\tbtnReviewForm.classList.remove( 'loading' );\n\t\t\t\twindow.location.reload();\n\t\t\t} ).catch( ( error ) => {\n\t\t\t\tconsole.log( error );\n\t\t\t\tparenNode.innerHTML += `<li class=\"lp-ajax-message error\" style=\"display:block\">${ error }</li>`;\n\t\t\t} )\n\t\t\t.finally( () => {} );\n\t};\n\n\tconst showMoreReview = ( ele, id, page, btnLoadReview = false ) => {\n\t\tlet signal = loadSignal();\n\t\tconst url = `${lpData.lp_rest_url}lp/v1/review/course/${id}/?page=${page}&show_template=1`;\n\t\tlet paramsFetch = {\n\t\t\tmethod: 'GET',\n\t\t};\n\t\tparamsFetch = loadNonceParam( paramsFetch );\n\n\t\tfetch( url, { ...paramsFetch, signal } )\n\t\t\t.then( ( response ) => response.json() )\n\t\t\t.then( ( response ) => {\n\t\t\t\t//console.log( response );\n\t\t\t\tif ( response.status === 'error' ) {\n\t\t\t\t\tthrow new Error( response.message || 'Error' );\n\t\t\t\t}\n\t\t\t\tlet data = response.data;\n\t\t\t\t// data && ele.insertAdjacentHTML( 'beforeend', data );\n\t\t\t\tele.innerHTML += data.template;\n\t\t\t\tif ( btnLoadReview ) {\n\t\t\t\t\tbtnLoadReview.classList.remove( 'loading' );\n\n\t\t\t\t\tconst paged = btnLoadReview.dataset.paged;\n\t\t\t\t\tconst numberPage = btnLoadReview.dataset.number;\n\n\t\t\t\t\tif ( numberPage === paged ) {\n\t\t\t\t\t\tbtnLoadReview.remove();\n\t\t\t\t\t}\n\n\t\t\t\t\tbtnLoadReview.dataset.paged = parseInt( paged ) + 1;\n\t\t\t\t}\n\n\t\t\t\t// Temporary fix for theme.\n\t\t\t\tconst elReviewStarsRated = document.querySelectorAll( '.review-stars-rated' );\n\t\t\t\tif ( elReviewStarsRated ) {\n\t\t\t\t\telReviewStarsRated.forEach( ( el ) => {\n\t\t\t\t\t\tel.style.display = 'flex';\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} ).catch( ( error ) => {\n\t\t\t\tconsole.log( error );\n\t\t\t\tele.innerHTML += `<li class=\"lp-ajax-message error\" style=\"display:block\">${ error && error }</li>`;\n\t\t\t} )\n\t\t\t.finally( () => {} );\n\t};\n\n\tdocument.addEventListener( 'click', function( e ) {\n\t\tconst btnLoadReview = document.querySelector( '.course-review-load-more' );\n\t\tif ( btnLoadReview &&  btnLoadReview.contains( e.target)  ) {\n\t\t\tbtnLoadReview.classList.add( 'loading' );\n\t\t\tconst paged = btnLoadReview && btnLoadReview.dataset.paged;\n\t\t\tconst courseID = btnLoadReview && btnLoadReview.dataset.id;\n\t\t\tconst element = document.querySelector( '.course-reviews-list' );\n\t\t\tshowMoreReview( element, courseID, paged, btnLoadReview );\n\t\t}\n\n\t\tconst btnReviewForm = document.querySelector('li.review-actions .submit-review');\n\t\tif ( btnReviewForm &&  btnReviewForm.contains( e.target)  ) {\n\t\t\tsubmitReview( btnReviewForm );\n\t\t}\n\t\tif ( e.target.classList.contains( 'write-a-review' ) ) {\n\t        const form = document.querySelector('.course-review-wrapper');\n\n\t        if( ! form ) {\n\t            return;\n\t        }\n\n\t\t\t// Event add review.\n\t\t\taddReviewStar();\n\n\t        //modal.classList.add('active');\n\t        form.classList.add('active');\n\t\t}\n\n\t} );\n}\n\ndocument.addEventListener('DOMContentLoaded', function(){\n    courseReviewSkeleton();\n});\n"],"names":["controller","loadSignal","undefined","abort","AbortController","signal","loadNonceParam","paramsFetch","parseInt","lpData","user_id","headers","nonce","closePopupWriteReview","btnClose","document","querySelectorAll","form","querySelector","i","length","btn","addEventListener","e","preventDefault","classList","remove","addReviewStar","reviewForm","reviewStar","stars","clicked","addClassReview","title","map","starHover","titleHover","getAttribute","add","forEach","star","index","value","courseReviewSkeleton","skeletonTab","elementCourseReview","course_id","dataset","id","getResponse","ele","skeleton","url","lp_rest_url","method","fetch","then","response","json","status","Error","message","data","insertAdjacentHTML","catch","error","console","log","finally","elReviewStarsRated","el","style","display","elReviewStars","position","submitReview","btnReviewForm","closest","parenNode","reviewTitle","reviewContent","rating","Number","courseID","emptyTitle","emptyContent","emptyRating","alert","formData","FormData","append","body","window","location","reload","innerHTML","showMoreReview","page","btnLoadReview","template","paged","numberPage","number","contains","target","element"],"sourceRoot":""}